<head>
    <meta id="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
    <title>LeetCode Solutions</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="icon" type="image/png" href="favicon.png">
  </head>

<div class="content">
    <h1 id="title" class="title">Format Submission</h1>

    <h3 style="font-weight: 400;">by <a href="https://benrosenberg.info" style="color: black;">Ben Rosenberg</a></h3>

    <p>
        Generate a submission data item to insert into the site's JSON file of submission data.
    </p>

    <div>
        <table cellpadding="4">
            <tr><td style="font-size: large;">Number</td><td><input type="text" id="problem-number"></td></tr>
            <tr><td style="font-size: large;">Title</td><td><input type="text" id="problem-title"></td></tr>
            <tr><td style="font-size: large;">Tags</td><td><input type="text" id="problem-tags"></td></tr>
            <tr><td style="font-size: large;">Difficulty</td><td><input type="text" id="problem-difficulty"></td></tr>
            <tr><td style="font-size: large;">Date</td><td><input type="text" id="problem-date"></td></tr>
            <tr><td style="font-size: large;">Language</td><td><input type="text" id="problem-language"></td></tr>
            <tr><td style="font-size: large;">Solution</td><td><textarea id="problem-solution" rows="20" cols="60"></textarea></td></tr>
        </table>
        <p>
            <button type="submit" class="navbutton" onclick="generateSubmissionData();">Generate</button>
        </p>
    </div>

    <div>
        <pre><code id="output">Submit a problem to generate a problem data item...</code></pre>
    </div>

    <p>
        <a href="/">Return to problem set overview</a>
    </p>
</div>

<script>
    async function retrieveData() {
        const response = await fetch('/data.json');
        const data = await response.json();
        // console.log(data);
        return data;
    }

    function generateSubmissionData() {
        number = document.getElementById('problem-number').value;
        title = document.getElementById('problem-title').value;
        tags = document.getElementById('problem-tags').value.split(',').map((tag) => tag.trim());
        difficulty = document.getElementById('problem-difficulty').value;
        date = document.getElementById('problem-date').value;
        language = document.getElementById('problem-language').value;
        solution = document.getElementById('problem-solution').value;
        retrieveData().then((data) => {
            data[number] = {
                "number" : number,
                "title" : title,
                "tags" : tags,
                "difficulty" : difficulty,
                "date" : date,
                "solution" : solution,
                "language" : language
            };
            output = document.getElementById('output');
            output.innerText = JSON.stringify(data, null, '    ');
        });
    }
</script>